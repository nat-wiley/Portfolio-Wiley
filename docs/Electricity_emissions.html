<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Natalie Wiley - GA Electricity Emissions</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Natalie Wiley</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-ghg-quantification-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">GHG Quantification Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-ghg-quantification-projects">    
        <li>
    <a class="dropdown-item" href="./Risk_Assessment.html">
 <span class="dropdown-text">Risk Analysis for Transportation Emission Reduction Policies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Electricity_emissions.html">
 <span class="dropdown-text">GA Electricity Emissions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Transportation_Emissions.html">
 <span class="dropdown-text">Transportation Emissions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Emission_Factors.html">
 <span class="dropdown-text">Custom Soil Emission Factors</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Datagaps.html">
 <span class="dropdown-text">Addressing Data Gaps</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./Urea_Emissions.html">
 <span class="dropdown-text">Urea Emissions Estimation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./SOC_change_montecarlo.html">
 <span class="dropdown-text">Soil Organic Carbon Stock Change</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./N2O_SoilEmissions.html">
 <span class="dropdown-text">Soil N2O Emissions-Regression Model</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./Geospatial.html">
 <span class="menu-text">Geospatial Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./COB_report.html">
 <span class="menu-text">Sustainability Assessments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Bison_storymap.html">
 <span class="menu-text">COP27 Presentation</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#model-implementation-r-script" id="toc-model-implementation-r-script" class="nav-link active" data-scroll-target="#model-implementation-r-script">Model Implementation R Script</a></li>
  <li><a href="#electricity-emissions-r-script" id="toc-electricity-emissions-r-script" class="nav-link" data-scroll-target="#electricity-emissions-r-script">Electricity Emissions R Script</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GA Electricity Emissions</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This project includes R Script that estimated emissions from electricity usage in the state of Georgia from 1960 - 2015, calculated every ten years. This is a tier 2 analysis because we use local data and baseline emission factors from the 2006 IPCC guidelines. This is a Monte Carlo model that runs the data through multiple iterations to get the most accurate results.</p>
<section id="model-implementation-r-script" class="level3">
<h3 class="anchored" data-anchor-id="model-implementation-r-script">Model Implementation R Script</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Results.electricity<span class="ot">&lt;-</span><span class="fu">ElectricityGenerationEmissions</span>(<span class="at">input.filename=</span><span class="st">"GAelectricity.csv"</span>, <span class="at">fuel.types=</span><span class="dv">6</span>, <span class="at">nyears=</span><span class="dv">7</span>, <span class="at">iseed=</span><span class="dv">430983</span>, <span class="at">nreps =</span> <span class="dv">10000</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>years<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1960</span>,<span class="dv">1970</span>,<span class="dv">1980</span>,<span class="dv">1990</span>,<span class="dv">2000</span>,<span class="dv">2010</span>,<span class="dv">2015</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="electricity-emissions-r-script" class="level3">
<h3 class="anchored" data-anchor-id="electricity-emissions-r-script">Electricity Emissions R Script</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="st">"ElectricityGenerationEmissions"</span><span class="ot">&lt;-</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(<span class="at">input.filename=</span><span class="st">"NAME"</span>, <span class="at">fuel.types=</span><span class="dv">6</span>,<span class="at">iseed=</span><span class="dv">430983</span>, <span class="at">nyears=</span><span class="dv">7</span>, <span class="at">nreps=</span><span class="dv">10000</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Script developed by Natalie Wiley</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Originally Developed: February 18th, 2022</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Last Update: February 18th, 2022</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Script estimates CO2, CH4, and N2O emissions from electricity generation from stationary sources using Tier 1 methods from the 2006 IPCC guidelines</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Returns MMT CO2 equivalents for each scenario</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="do">###### Arguments</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="co"># input.filename    Name of file with activity data, which is comma delimited file with the input activity data in columns along with a header row as follows: fuel type, CO2 emission factor, min. CO2 emission factor, max. CO2 emission factor, CH4 emission factor, min. CH4 emission factor, max. CH4 emission factor, N2O emission factor, min. N2O emission factor, max. N2O emission factor, fuel amount for year 1 (in TJ), standard deviation for fuel amount,...for all years.</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="co"># fuel.types        Number of fuel types in the input file</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nyears            Number of years of data</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># iseed             Initial seed value for random draws</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="co"># nreps             Number of Monte Carlo iterations</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    <span class="do">##</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>    <span class="do">###### Begin Script</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>    <span class="do">###### Set Seed</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">set.seed</span>(iseed)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="do">###### Load library</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">library</span>(triangle)</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>    <span class="do">###### Import files</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>    input.data<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="at">file=</span>input.filename, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">","</span>, <span class="at">fill=</span><span class="cn">FALSE</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="co"># ensure all input data on fuel amounts and EFs are numeric (problem with excel)</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(n <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>(<span class="dv">9</span><span class="sc">+</span>(nyears<span class="sc">*</span><span class="dv">2</span>)))){</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>        input.data[,n<span class="sc">+</span><span class="dv">1</span>]<span class="ot">&lt;-</span><span class="fu">as.numeric</span>(input.data[,n<span class="sc">+</span><span class="dv">1</span>])</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>    <span class="do">###Check Validity of Input Data</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a>    check.fuel.type<span class="ot">&lt;-</span><span class="fu">length</span>(input.data[,<span class="dv">1</span>])<span class="sc">==</span>fuel.types</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span>(<span class="sc">!</span>check.fuel.type) {<span class="fu">stop</span>(<span class="st">"Warning the number of fuel types in the function call</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a><span class="st">                               does not equal the number in the input file."</span>)}</span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Emissions Factors</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(efact <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)){</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>      check.CO2.EF<span class="ot">&lt;-</span>input.data[efact,<span class="dv">2</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.CO2.EF) {<span class="fu">stop</span>(<span class="st">"Error: Co2 EF must be greater than or equal to 0</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a><span class="st">                             - check input file."</span>)</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>      check.CO2.EF.min<span class="ot">&lt;-</span>input.data[efact,<span class="dv">3</span>]<span class="sc">&lt;=</span>input.data[efact,<span class="dv">2</span>]<span class="sc">&amp;</span>input.data[efact,<span class="dv">3</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.CO2.EF.min) {<span class="fu">stop</span>(<span class="st">"Error: Minimum CO2 EF must be greater than or equal to 0</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a><span class="st">                                 and less than the EF value - Check input file."</span>)</span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>      Check.CO2.EF.max<span class="ot">&lt;-</span>input.data[efact,<span class="dv">4</span>]<span class="sc">&gt;=</span>input.data[efact,<span class="dv">2</span>]</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>Check.CO2.EF.max) {<span class="fu">stop</span>(<span class="st">"Error: Maximum CO2 EF must be greater than or</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a><span class="st">                                  equal to EF value - check input file."</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>      check.CH4.EF<span class="ot">&lt;-</span>input.data[efact,<span class="dv">5</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.CH4.EF) {<span class="fu">stop</span>(<span class="st">"Error: CH4 EF must be greater than or equal to 0</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a><span class="st">                             - check input file."</span>)</span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>      check.CH4.EF.min<span class="ot">&lt;-</span>input.data[efact,<span class="dv">6</span>]<span class="sc">&lt;=</span>input.data[efact,<span class="dv">5</span>]<span class="sc">&amp;</span>input.data[efact,<span class="dv">6</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.CH4.EF.min) {<span class="fu">stop</span>(<span class="st">"Error: Minimum CH4 EF must be greater than or equal to 0</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a><span class="st">                                 and less than the EF value - Check input file."</span>)</span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>      Check.CH4.EF.max<span class="ot">&lt;-</span>input.data[efact,<span class="dv">7</span>]<span class="sc">&gt;=</span>input.data[efact,<span class="dv">5</span>]</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>Check.CH4.EF.max) {<span class="fu">stop</span>(<span class="st">"Error: Maximum CH4 EF must be greater than or</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a><span class="st">                                  equal to EF value - check input file."</span>)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>      check.N2O.EF<span class="ot">&lt;-</span>input.data[efact,<span class="dv">8</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.N2O.EF) {<span class="fu">stop</span>(<span class="st">"Error: N2O EF must be greater than or equal to 0</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a><span class="st">                             - check input file."</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>      check.N2O.EF.min<span class="ot">&lt;-</span>input.data[efact,<span class="dv">9</span>]<span class="sc">&lt;=</span>input.data[efact,<span class="dv">8</span>]<span class="sc">&amp;</span>input.data[efact,<span class="dv">6</span>]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>check.N2O.EF.min) {<span class="fu">stop</span>(<span class="st">"Error: Minimum N2O EF must be greater than or equal to 0</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="st">                                 and less than the EF value - Check input file."</span>)</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>      Check.N2O.EF.max<span class="ot">&lt;-</span>input.data[efact,<span class="dv">10</span>]<span class="sc">&gt;=</span>input.data[efact,<span class="dv">8</span>]</span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span>(<span class="sc">!</span>Check.N2O.EF.max) {<span class="fu">stop</span>(<span class="st">"Error: Maximum N2O EF must be greater than or</span></span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a><span class="st">                                  equal to EF value - check input file."</span>)</span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Check Fuel Amounts</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (f <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)){</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>        check.fuel.amount<span class="ot">&lt;-</span>input.data[f,<span class="dv">11</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>check.fuel.amount) {<span class="fu">stop</span>(<span class="st">"Error: Fuel amounts must be greater than or equal to 0</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a><span class="st">                                     - Check input file."</span>)</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>        check.fuel.sd<span class="ot">&lt;-</span>input.data[f,<span class="dv">12</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)]<span class="sc">&gt;=</span><span class="dv">0</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>check.fuel.sd) {<span class="fu">stop</span>(<span class="st">"Error: Fuel Standard Deciations must be greater than or equal to 0</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a><span class="st">                                 - Check input file."</span>)</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>    <span class="co">#</span></span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="do">#### Simulate nreps of EF and Fuel Amounts</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>    <span class="do">## Emission Factors</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CO2</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>    CO2.EF.sim<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span>fuel.types,<span class="at">ncol =</span> nreps)</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>( f <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)) {</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>      CO2.EF.sim[f,]<span class="ot">&lt;-</span><span class="fu">rtriangle</span>(nreps, <span class="at">a=</span>input.data[f,<span class="dv">3</span>],<span class="at">b=</span>input.data[f,<span class="dv">4</span>],</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>                                <span class="at">c=</span>input.data[f,<span class="dv">2</span>])</span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>    <span class="co"># CH4</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>    CH4.EF.sim<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span>fuel.types,<span class="at">ncol =</span> nreps)</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>( f <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)) {</span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>      CH4.EF.sim[f,]<span class="ot">&lt;-</span><span class="fu">rtriangle</span>(nreps, <span class="at">a=</span>input.data[f,<span class="dv">6</span>],<span class="at">b=</span>input.data[f,<span class="dv">7</span>],</span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>                                <span class="at">c=</span>input.data[f,<span class="dv">5</span>])</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>    <span class="co"># N2O</span></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>    N2O.EF.sim<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span>fuel.types,<span class="at">ncol =</span> nreps)</span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>( f <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)) {</span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>      N2O.EF.sim[f,]<span class="ot">&lt;-</span><span class="fu">rtriangle</span>(nreps, <span class="at">a=</span>input.data[f,<span class="dv">9</span>],<span class="at">b=</span>input.data[f,<span class="dv">10</span>],</span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>                                <span class="at">c=</span>input.data[f,<span class="dv">8</span>])</span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Fuel Amount</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>    fuel.amount.sim<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>,<span class="at">nrow=</span>fuel.types<span class="sc">*</span>nyears,<span class="at">ncol=</span>nreps)</span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span>(y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span>(f <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)){</span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>        fuel.amount.sim[f<span class="sc">+</span>(fuel.types<span class="sc">*</span>(y<span class="dv">-1</span>)),]<span class="ot">&lt;-</span><span class="fu">rnorm</span>(nreps,<span class="at">mean=</span>input.data[f,<span class="dv">11</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)],</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>                                                      <span class="at">sd=</span>input.data[f,<span class="dv">12</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)])</span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>   <span class="do">###### Calculate emissions</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>    <span class="co"># IPCC 2006 GL: Emissions = Fuel Consumption * EF</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Units: Emissions in kg, Fuel.amount in TJ and EF is kg/TJ</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>    <span class="do">### Deterministic Estimation</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>    Deterministic.CO2eq<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>fuel.types, <span class="at">ncol=</span>nyears)</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (d <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)){</span>
<span id="cb2-128"><a href="#cb2-128" aria-hidden="true" tabindex="-1"></a>        Deterministic.CO2eq[d,y]<span class="ot">&lt;-</span>(input.data[d,<span class="dv">2</span>]<span class="sc">*</span>input.data[d,<span class="dv">11</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)])<span class="sc">+</span></span>
<span id="cb2-129"><a href="#cb2-129" aria-hidden="true" tabindex="-1"></a>                                  (input.data[d,<span class="dv">5</span>]<span class="sc">*</span>input.data[d,<span class="dv">11</span> <span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)])<span class="sc">*</span><span class="dv">25</span> <span class="sc">+</span></span>
<span id="cb2-130"><a href="#cb2-130" aria-hidden="true" tabindex="-1"></a>          (input.data[d,<span class="dv">8</span>]<span class="sc">*</span>input.data[d,<span class="dv">11</span> <span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">2</span>)])<span class="sc">*</span><span class="dv">298</span></span>
<span id="cb2-131"><a href="#cb2-131" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-132"><a href="#cb2-132" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb2-133"><a href="#cb2-133" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sum the individual fuel sources to obtain total CO2eq emissions</span></span>
<span id="cb2-134"><a href="#cb2-134" aria-hidden="true" tabindex="-1"></a>      Deterministic.CO2eq.total<span class="ot">&lt;-</span><span class="fu">apply</span>(Deterministic.CO2eq, <span class="at">MAR=</span><span class="dv">2</span>, <span class="at">FUN=</span><span class="st">"sum"</span>)</span>
<span id="cb2-135"><a href="#cb2-135" aria-hidden="true" tabindex="-1"></a>      <span class="co">#</span></span>
<span id="cb2-136"><a href="#cb2-136" aria-hidden="true" tabindex="-1"></a>      <span class="do">### Probabilistic Estimation</span></span>
<span id="cb2-137"><a href="#cb2-137" aria-hidden="true" tabindex="-1"></a>      Probabilistic.CO2eq<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>fuel.types<span class="sc">*</span>nyears, <span class="at">ncol=</span>nreps)</span>
<span id="cb2-138"><a href="#cb2-138" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-139"><a href="#cb2-139" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> (p <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>fuel.types)){</span>
<span id="cb2-140"><a href="#cb2-140" aria-hidden="true" tabindex="-1"></a>          Probabilistic.CO2eq[p<span class="sc">+</span>(fuel.types<span class="sc">*</span>(y<span class="dv">-1</span>)),]<span class="ot">&lt;-</span></span>
<span id="cb2-141"><a href="#cb2-141" aria-hidden="true" tabindex="-1"></a>            ((CO2.EF.sim[p,]<span class="sc">*</span>fuel.amount.sim[p<span class="sc">+</span>(fuel.types<span class="sc">*</span>(y<span class="dv">-1</span>)),]))<span class="sc">+</span></span>
<span id="cb2-142"><a href="#cb2-142" aria-hidden="true" tabindex="-1"></a>            ((CH4.EF.sim[p,]<span class="sc">*</span>fuel.amount.sim[p<span class="sc">+</span>(fuel.types<span class="sc">*</span>(y<span class="dv">-1</span>)),])<span class="sc">*</span><span class="dv">25</span>)<span class="sc">+</span></span>
<span id="cb2-143"><a href="#cb2-143" aria-hidden="true" tabindex="-1"></a>            ((N2O.EF.sim[p,]<span class="sc">*</span>fuel.amount.sim[p<span class="sc">+</span>(fuel.types<span class="sc">*</span>(y<span class="dv">-1</span>)),])<span class="sc">*</span><span class="dv">298</span>)</span>
<span id="cb2-144"><a href="#cb2-144" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb2-145"><a href="#cb2-145" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-146"><a href="#cb2-146" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb2-147"><a href="#cb2-147" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Sum the individual fuel sources to obtain total CO2eq emissions</span></span>
<span id="cb2-148"><a href="#cb2-148" aria-hidden="true" tabindex="-1"></a>      Probabilistic.CO2eq.total<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>nyears, <span class="at">ncol=</span>nreps)</span>
<span id="cb2-149"><a href="#cb2-149" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-150"><a href="#cb2-150" aria-hidden="true" tabindex="-1"></a>        Probabilistic.CO2eq.total[y,]<span class="ot">&lt;-</span><span class="fu">apply</span> (Probabilistic.CO2eq[(<span class="dv">1</span><span class="sc">+</span>((y<span class="dv">-1</span>)<span class="sc">*</span>fuel.types))<span class="sc">:</span> </span>
<span id="cb2-151"><a href="#cb2-151" aria-hidden="true" tabindex="-1"></a>                                                                    (fuel.types<span class="sc">+</span> ((y<span class="dv">-1</span>)<span class="sc">*</span>fuel.types)),],<span class="at">MAR=</span><span class="dv">2</span>, <span class="at">FUN=</span><span class="st">"sum"</span>)</span>
<span id="cb2-152"><a href="#cb2-152" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-153"><a href="#cb2-153" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-154"><a href="#cb2-154" aria-hidden="true" tabindex="-1"></a>      <span class="co">#</span></span>
<span id="cb2-155"><a href="#cb2-155" aria-hidden="true" tabindex="-1"></a>      <span class="do">###### Estimate median and confidence intervals, check emissions</span></span>
<span id="cb2-156"><a href="#cb2-156" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-157"><a href="#cb2-157" aria-hidden="true" tabindex="-1"></a>      <span class="co">#</span></span>
<span id="cb2-158"><a href="#cb2-158" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Create matrix with col 1 = mean, col 2 = 2.5 percentile, and col 3 = 97.5 percentile</span></span>
<span id="cb2-159"><a href="#cb2-159" aria-hidden="true" tabindex="-1"></a>      emission.results<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow=</span>nyears, <span class="at">ncol=</span><span class="dv">3</span>)</span>
<span id="cb2-160"><a href="#cb2-160" aria-hidden="true" tabindex="-1"></a>      <span class="cf">for</span> (y <span class="cf">in</span> (<span class="dv">1</span><span class="sc">:</span>nyears)){</span>
<span id="cb2-161"><a href="#cb2-161" aria-hidden="true" tabindex="-1"></a>        emission.results[y,<span class="dv">1</span>]<span class="ot">&lt;-</span> <span class="fu">median</span>(Probabilistic.CO2eq.total[y,])</span>
<span id="cb2-162"><a href="#cb2-162" aria-hidden="true" tabindex="-1"></a>        q<span class="ot">&lt;-</span><span class="fu">quantile</span>(Probabilistic.CO2eq.total[y,], <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</span>
<span id="cb2-163"><a href="#cb2-163" aria-hidden="true" tabindex="-1"></a>        emission.results[y,<span class="dv">2</span>]<span class="ot">&lt;-</span> q[<span class="dv">1</span>]</span>
<span id="cb2-164"><a href="#cb2-164" aria-hidden="true" tabindex="-1"></a>        emission.results[y,<span class="dv">3</span>]<span class="ot">&lt;-</span> q[<span class="dv">2</span>]</span>
<span id="cb2-165"><a href="#cb2-165" aria-hidden="true" tabindex="-1"></a>        check.emissions<span class="ot">&lt;-</span> Deterministic.CO2eq.total[y]<span class="sc">&gt;=</span>emission.results[y,<span class="dv">2</span>]<span class="sc">&amp;</span></span>
<span id="cb2-166"><a href="#cb2-166" aria-hidden="true" tabindex="-1"></a>          Deterministic.CO2eq.total[y]<span class="sc">&lt;=</span>emission.results[y,<span class="dv">3</span>]</span>
<span id="cb2-167"><a href="#cb2-167" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="sc">!</span>check.emissions){ </span>
<span id="cb2-168"><a href="#cb2-168" aria-hidden="true" tabindex="-1"></a>          <span class="fu">cat</span>(<span class="st">"WARNING: Deterministic Solution for year"</span>, y, <span class="st">"is outside of its respective condifence interval."</span>)</span>
<span id="cb2-169"><a href="#cb2-169" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb2-170"><a href="#cb2-170" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb2-171"><a href="#cb2-171" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb2-172"><a href="#cb2-172" aria-hidden="true" tabindex="-1"></a>      <span class="do">###### Return Statement</span></span>
<span id="cb2-173"><a href="#cb2-173" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Convert emissions to MMT CO2 from kg CO2</span></span>
<span id="cb2-174"><a href="#cb2-174" aria-hidden="true" tabindex="-1"></a>      emission.results<span class="ot">&lt;-</span>emission.results<span class="sc">/</span><span class="dv">10</span><span class="sc">^</span><span class="dv">9</span></span>
<span id="cb2-175"><a href="#cb2-175" aria-hidden="true" tabindex="-1"></a>      <span class="fu">colnames</span>(emission.results)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"median.MMTCO2"</span>, <span class="st">"2.5 Percentile"</span>, <span class="st">"97.5 Percentile"</span>)</span>
<span id="cb2-176"><a href="#cb2-176" aria-hidden="true" tabindex="-1"></a>      <span class="fu">return</span>(emission.results)</span>
<span id="cb2-177"><a href="#cb2-177" aria-hidden="true" tabindex="-1"></a>      <span class="co">#</span></span>
<span id="cb2-178"><a href="#cb2-178" aria-hidden="true" tabindex="-1"></a>      <span class="do">###### End Script</span></span>
<span id="cb2-179"><a href="#cb2-179" aria-hidden="true" tabindex="-1"></a>  }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>